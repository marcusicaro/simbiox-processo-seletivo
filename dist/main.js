(()=>{const e="https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=b0ff0a64099e470410a2faf2a068f56a",n="https://image.tmdb.org/t/p/w500",t=document.getElementById("main"),i=document.getElementById("form"),s=(document.getElementById("search"),document.getElementById("logo")),a=document.getElementById("previous"),d=document.getElementById("current"),o=document.getElementById("next"),l=document.querySelector(".pagination");var c=0,r=0,v=0,m="",p=0;function g(e){m=e,fetch(e).then((e=>e.json())).then((e=>{!function(e){t.innerHTML="",e.forEach((e=>{const{title:i,poster_path:s,vote_average:a,overview:d,id:o}=e,c=document.createElement("div");c.classList="movie-card",c.innerHTML=`\n        <img src="${n+s}" alt="${i}" srcset="">\n        \n        <div class="movie-info"></div>\n      \n        <div class="movie-info">\n          <h3>${i}</h3>\n          <span class="${f(a)}">${a}</span>\n        </div>\n\n        <div class="movie-id">\n        <p>ID: ${o}</p>\n        </div>\n        `,t.appendChild(c),c.addEventListener("click",(e=>(e.preventDefault(),t.innerHTML="",l.classList.add("hide"),c.innerHTML=`\n            <img src="${n+s}" alt="${i}" srcset="">\n            \n            <div class="movie-info"></div>\n          \n            <div class="movie-info">\n              <h3>${i}</h3>\n              <span class="${f(a)}">${a}</span>\n            </div>\n    \n            <div class="overview">\n              <p>${d}</p>\n            </div>\n    \n            <div class="movie-id">\n            <p>ID: ${o}</p>\n            </div>\n            `,t.appendChild(c))))}))}(e.results),c=e.page,r=e.page+1,v=e.page-1,p=e.total_pages,d.innerText=c,c<=1?(a.classList.add("disabled"),o.classList.remove("disabled")):c>=p?(a.classList.remove("disabled"),o.classList.add("disabled")):(a.classList.remove("disabled"),o.classList.remove("disabled"))}))}function f(e){return e>7.5?"green":e<8&&e>6?"orange":"red"}function u(e){let n=m.split("?"),t=n[1].split("&"),i=t[t.length-1].split("=");if("page"!=i[0])g(m+"&page="+e);else{i[1]=e.toString();let s=i.join("=");t[t.length-1]=s;let a=t.join("&");g(n[0]+"?"+a)}}i.addEventListener("submit",(n=>{n.preventDefault();const t=search.value;if(t)return g("https://api.themoviedb.org/3/search/movie?api_key=b0ff0a64099e470410a2faf2a068f56a&query="+t);g(e)})),s.addEventListener("click",(()=>{g(e),l.classList.remove("hide")})),o.addEventListener("click",(()=>{r<=p&&u(r)})),a.addEventListener("click",(()=>{v>0&&u(v)})),g(e)})();