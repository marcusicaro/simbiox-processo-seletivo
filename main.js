(()=>{const e="https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=b0ff0a64099e470410a2faf2a068f56a",n="https://image.tmdb.org/t/p/w500",t=document.getElementById("main"),i=document.getElementById("form"),s=(document.getElementById("search"),document.getElementById("logo")),a=document.getElementById("return-page"),d=document.getElementById("previous"),c=document.getElementById("current"),l=document.getElementById("next"),o=document.querySelector(".pagination");var r=0,v=0,m=0,p="",g=0;function u(e){p=e,fetch(e).then((e=>e.json())).then((e=>{!function(e){t.innerHTML="",e.forEach((e=>{const{title:i,poster_path:s,vote_average:d,overview:c,id:l}=e,v=document.createElement("div");v.classList="movie-card",v.innerHTML=`\n        <img src="${n+s}" alt="${i}" srcset="">\n        \n        <div class="movie-info"></div>\n      \n        <div class="movie-info">\n          <h3>${i}</h3>\n          <span class="${f(d)}">${d}</span>\n        </div>\n\n        <div class="movie-id">\n        <p>ID: ${l}</p>\n        </div>\n        `,t.appendChild(v),v.addEventListener("click",(e=>{e.preventDefault(),t.innerHTML="",o.classList.add("hide"),v.innerHTML=`\n            <img src="${n+s}" alt="${i}" srcset="">\n            \n            <div class="movie-info"></div>\n          \n            <div class="movie-info">\n              <h3>${i}</h3>\n              <span class="${f(d)}">${d}</span>\n            </div>\n    \n            <div class="overview">\n              <p>${c}</p>\n            </div>\n    \n            <div class="movie-id">\n            <p>ID: ${l}</p>\n            </div>\n            `,a.classList.remove("hide"),a.addEventListener("click",(e=>{e.preventDefault(),h(r),L()})),t.appendChild(v)}))}))}(e.results),r=e.page,v=e.page+1,m=e.page-1,g=e.total_pages,c.innerText=r,r<=1?(d.classList.add("disabled"),l.classList.remove("disabled")):r>=g?(d.classList.remove("disabled"),l.classList.add("disabled")):(d.classList.remove("disabled"),l.classList.remove("disabled"))}))}function f(e){return e>7.5?"green":e<8&&e>6?"orange":"red"}function h(e){let n=p.split("?"),t=n[1].split("&"),i=t[t.length-1].split("=");if("page"!=i[0])u(p+"&page="+e);else{i[1]=e.toString();let s=i.join("=");t[t.length-1]=s;let a=t.join("&");u(n[0]+"?"+a)}}function L(){a.classList.add("hide"),o.classList.remove("hide")}i.addEventListener("submit",(n=>{n.preventDefault();const t=search.value;if(t)return L(),u("https://api.themoviedb.org/3/search/movie?api_key=b0ff0a64099e470410a2faf2a068f56a&query="+t);u(e),L()})),s.addEventListener("click",(()=>{u(e),o.classList.remove("hide"),a.classList.add("hide")})),l.addEventListener("click",(()=>{v<=g&&h(v)})),d.addEventListener("click",(()=>{m>0&&h(m)})),u(e)})();